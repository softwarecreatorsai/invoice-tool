<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Master - Professional Business Invoice Generator</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts - Poppins for English, Heebo for Hebrew -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- jsPDF for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- html2canvas for PDF rendering -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    .lang-en {
      font-family: 'Poppins', sans-serif;
    }

    .lang-he {
      font-family: 'Heebo', sans-serif;
    }

    .animate-fade-in {
      animation: fadeIn 0.5s ease forwards;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    .animate-slide-up {
      animation: slideUp 0.7s ease forwards;
    }

    @keyframes slideUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .transition-all {
      transition-property: all;
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      transition-duration: 300ms;
    }

    .print-only {
      display: none;
    }

    @media print {
      .no-print {
        display: none !important;
      }
      .print-only {
        display: block;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-b from-gray-50 to-white transition-colors duration-300 lang-en">
  <!-- Header -->
  <header class="fixed w-full bg-white/90 backdrop-blur-sm z-50 border-b border-gray-200 no-print">
    <div class="container mx-auto px-4 md:px-6 flex items-center justify-between h-16">
      <a href="#" class="flex items-center gap-2">
        <i class="fas fa-file-invoice-dollar text-blue-600 text-xl"></i>
        <span class="text-xl font-semibold">
          <span data-lang-en="Invoice" data-lang-he="חשבונית"></span><span class="text-blue-600" data-lang-en="Master" data-lang-he="מאסטר"></span>
        </span>
      </a>

      <div class="hidden md:flex items-center space-x-4 rtl:space-x-reverse">
        <nav class="flex items-center mr-6 rtl:mr-0 rtl:ml-6">
          <a href="#features" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="Features" data-lang-he="תכונות"></a>
          <a href="#how-it-works" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="How It Works" data-lang-he="איך זה עובד"></a>
          <a href="#faq" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="FAQ" data-lang-he="שאלות נפוצות"></a>
        </nav>

        <!-- Language Switcher -->
        <div class="relative">
          <button id="language-switcher" class="inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            <span data-lang-en="English" data-lang-he="עברית"></span>
            <i class="fas fa-chevron-down ml-2 rtl:ml-0 rtl:mr-2"></i>
          </button>
          <div id="language-dropdown" class="absolute right-0 rtl:left-0 rtl:right-auto mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden">
            <div class="py-1">
              <button class="language-option w-full text-left rtl:text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="en">English</button>
              <button class="language-option w-full text-left rtl:text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="he">עברית</button>
            </div>
          </div>
        </div>

        <button id="save-template-btn" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 shadow-sm">
          <i class="fas fa-save mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Save Template" data-lang-he="שמור תבנית"></span>
        </button>

        <button id="theme-toggle" class="ml-4 rtl:ml-0 rtl:mr-4 flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 text-gray-500">
          <i class="fas fa-moon"></i>
          <i class="fas fa-sun hidden"></i>
        </button>
      </div>

      <button class="md:hidden flex items-center justify-center w-10 h-10 text-gray-700" id="mobile-menu-button">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div class="md:hidden hidden bg-white border-b border-gray-200" id="mobile-menu">
      <div class="container mx-auto px-4 py-3">
        <nav class="flex flex-col space-y-3">
          <a href="#features" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="Features" data-lang-he="תכונות"></a>
          <a href="#how-it-works" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="How It Works" data-lang-he="איך זה עובד"></a>
          <a href="#faq" class="px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600" data-lang-en="FAQ" data-lang-he="שאלות נפוצות"></a>
        </nav>
        <div class="mt-4 mb-2 space-y-2">
          <!-- Mobile Language Switcher -->
          <select id="mobile-language-switcher" class="w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white">
            <option value="en">English</option>
            <option value="he">עברית</option>
          </select>

          <button id="mobile-save-template-btn" class="w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700">
            <i class="fas fa-save mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Save Template" data-lang-he="שמור תבנית"></span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="pt-20 pb-12">
    <div class="container mx-auto px-4 md:px-6">
      <div class="mb-8 text-center animate-slide-up">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight mb-4 text-gray-900">
          <span data-lang-en="Create Professional" data-lang-he="צור חשבוניות"></span> <span class="text-blue-600" data-lang-en="Invoices" data-lang-he="מקצועיות"></span> <span data-lang-en="in Seconds" data-lang-he="תוך שניות"></span>
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          <span data-lang-en="Generate, customize, and download professional invoices for your business without leaving your browser." data-lang-he="צור, התאם אישית והורד חשבוניות מקצועיות לעסק שלך מבלי לעזוב את הדפדפן."></span>
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-10">
        <!-- Form Section -->
        <div class="lg:col-span-2 no-print">
          <div class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden">
            <div class="p-6">
              <!-- Company Information -->
              <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <i class="fas fa-building mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"></i>
                  <span data-lang-en="Company Information" data-lang-he="פרטי החברה"></span>
                </h2>
                <div class="space-y-4">
                  <div>
                    <label for="company-name" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Company Name" data-lang-he="שם החברה"></label>
                    <input type="text" id="company-name" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="Your Company Name" data-lang-placeholder-he="שם החברה שלך">
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label for="company-email" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Email" data-lang-he="אימייל"></label>
                      <input type="email" id="company-email" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="your@email.com" data-lang-placeholder-he="your@email.com">
                    </div>
                    <div>
                      <label for="company-phone" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Phone" data-lang-he="טלפון"></label>
                      <input type="tel" id="company-phone" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="(123) 456-7890" data-lang-placeholder-he="(123) 456-7890">
                    </div>
                  </div>
                  <div>
                    <label for="company-address" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Address" data-lang-he="כתובת"></label>
                    <textarea id="company-address" rows="2" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="123 Business St, City, Country" data-lang-placeholder-he="רחוב העסקים 123, עיר, מדינה"></textarea>
                  </div>
                  <div>
                    <label for="company-logo" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Logo URL (optional)" data-lang-he="כתובת לוגו (אופציונלי)"></label>
                    <input type="url" id="company-logo" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="https://example.com/logo.png" data-lang-placeholder-he="https://example.com/logo.png">
                  </div>
                </div>
              </div>

              <!-- Client Information -->
              <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <i class="fas fa-user mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"></i>
                  <span data-lang-en="Client Information" data-lang-he="פרטי הלקוח"></span>
                </h2>
                <div class="space-y-4">
                  <div>
                    <label for="client-name" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Client Name" data-lang-he="שם הלקוח"></label>
                    <input type="text" id="client-name" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="Client Company Name" data-lang-placeholder-he="שם חברת הלקוח">
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label for="client-email" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Email" data-lang-he="אימייל"></label>
                      <input type="email" id="client-email" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="client@email.com" data-lang-placeholder-he="client@email.com">
                    </div>
                    <div>
                      <label for="client-phone" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Phone" data-lang-he="טלפון"></label>
                      <input type="tel" id="client-phone" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="(123) 456-7890" data-lang-placeholder-he="(123) 456-7890">
                    </div>
                  </div>
                  <div>
                    <label for="client-address" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Address" data-lang-he="כתובת"></label>
                    <textarea id="client-address" rows="2" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="456 Client St, City, Country" data-lang-placeholder-he="רחוב הלקוח 456, עיר, מדינה"></textarea>
                  </div>
                </div>
              </div>

              <!-- Invoice Details -->
              <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <i class="fas fa-file-invoice mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"></i>
                  <span data-lang-en="Invoice Details" data-lang-he="פרטי החשבונית"></span>
                </h2>
                <div class="space-y-4">
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                      <label for="invoice-number" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Invoice #" data-lang-he="מספר חשבונית"></label>
                      <input type="text" id="invoice-number" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="INV-001" data-lang-placeholder-he="INV-001">
                    </div>
                    <div>
                      <label for="invoice-date" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Date" data-lang-he="תאריך"></label>
                      <input type="date" id="invoice-date" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors">
                    </div>
                    <div>
                      <label for="invoice-due-date" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Due Date" data-lang-he="תאריך לתשלום"></label>
                      <input type="date" id="invoice-due-date" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors">
                    </div>
                  </div>
                  <div>
                    <label for="payment-terms" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Payment Terms" data-lang-he="תנאי תשלום"></label>
                    <input type="text" id="payment-terms" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="Due on receipt, Net 30, etc." data-lang-placeholder-he="לתשלום עם קבלה, שוטף + 30, וכו'">
                  </div>
                  <div>
                    <label for="invoice-notes" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Notes (optional)" data-lang-he="הערות (אופציונלי)"></label>
                    <textarea id="invoice-notes" rows="2" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="Thank you for your business!" data-lang-placeholder-he="תודה על העסקים שלך!"></textarea>
                  </div>
                </div>
              </div>

              <!-- Line Items -->
              <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center justify-between">
                  <span class="flex items-center">
                    <i class="fas fa-list mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"></i>
                    <span data-lang-en="Line Items" data-lang-he="פריטים"></span>
                  </span>
                  <button id="add-item-btn" class="text-sm bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded-md inline-flex items-center">
                    <i class="fas fa-plus mr-1 rtl:mr-0 rtl:ml-1"></i> <span data-lang-en="Add Item" data-lang-he="הוסף פריט"></span>
                  </button>
                </h2>
                <div id="line-items-container" class="space-y-4">
                  <!-- Line items will be added here dynamically -->
                  <div class="line-item bg-gray-50 p-4 rounded-md border border-gray-200">
                    <div class="grid grid-cols-12 gap-3">
                      <div class="col-span-12 sm:col-span-5">
                        <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Description" data-lang-he="תיאור"></label>
                        <input type="text" class="item-description w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="Item description" data-lang-placeholder-he="תיאור הפריט">
                      </div>
                      <div class="col-span-4 sm:col-span-2">
                        <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Quantity" data-lang-he="כמות"></label>
                        <input type="number" min="1" class="item-quantity w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="Qty" data-lang-placeholder-he="כמות" value="1">
                      </div>
                      <div class="col-span-8 sm:col-span-2">
                        <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Price" data-lang-he="מחיר"></label>
                        <input type="number" min="0" step="0.01" class="item-price w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="0.00" data-lang-placeholder-he="0.00">
                      </div>
                      <div class="col-span-11 sm:col-span-2">
                        <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Total" data-lang-he="סה״כ"></label>
                        <input type="text" class="item-total w-full px-3 py-2 rounded-md bg-gray-100 border border-gray-300 outline-none text-sm" data-lang-placeholder-en="0.00" data-lang-placeholder-he="0.00" readonly>
                      </div>
                      <div class="col-span-1 flex items-end justify-end">
                        <button class="remove-item-btn text-red-500 hover:text-red-700 p-2" title="Remove Item">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Totals -->
              <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <i class="fas fa-calculator mr-2 rtl:mr-0 rtl:ml-2 text-blue-600"></i>
                  <span data-lang-en="Totals" data-lang-he="סיכום"></span>
                </h2>
                <div class="space-y-4 bg-gray-50 p-4 rounded-md border border-gray-200">
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <label for="subtotal" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Subtotal" data-lang-he="סכום ביניים"></label>
                      <input type="text" id="subtotal" class="w-full px-3 py-2 rounded-md bg-gray-100 border border-gray-300 outline-none transition-colors" readonly>
                    </div>
                    <div>
                      <label for="discount" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Discount" data-lang-he="הנחה"></label>
                      <div class="flex">
                        <input type="number" min="0" id="discount" class="w-full px-3 py-2 rounded-l-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="0" data-lang-placeholder-he="0">
                        <select id="discount-type" class="px-3 py-2 rounded-r-md border border-r border-t border-b border-gray-300 bg-gray-50 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                          <option value="percentage">%</option>
                          <option value="fixed">$</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <label for="tax-rate" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Tax Rate (%)" data-lang-he="שיעור מע״מ (%)"></label>
                      <input type="number" min="0" step="0.01" id="tax-rate" class="w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors" data-lang-placeholder-en="0" data-lang-placeholder-he="0">
                    </div>
                    <div>
                      <label for="tax-amount" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Tax Amount" data-lang-he="סכום מע״מ"></label>
                      <input type="text" id="tax-amount" class="w-full px-3 py-2 rounded-md bg-gray-100 border border-gray-300 outline-none transition-colors" readonly>
                    </div>
                  </div>
                  <div>
                    <label for="total" class="block text-sm font-medium text-gray-700 mb-1" data-lang-en="Total" data-lang-he="סה״כ לתשלום"></label>
                    <input type="text" id="total" class="w-full px-3 py-2 rounded-md bg-blue-50 border border-blue-300 outline-none transition-colors font-bold" readonly>
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="flex flex-wrap gap-3 justify-center sm:justify-start">
                <button id="preview-btn" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 shadow-sm">
                  <i class="fas fa-eye mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Preview" data-lang-he="תצוגה מקדימה"></span>
                </button>
                <button id="download-pdf-btn" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 shadow-sm">
                  <i class="fas fa-download mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Download PDF" data-lang-he="הורד PDF"></span>
                </button>
                <button id="print-btn" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 shadow-sm">
                  <i class="fas fa-print mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Print" data-lang-he="הדפס"></span>
                </button>
                <button id="reset-btn" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 shadow-sm">
                  <i class="fas fa-redo-alt mr-2 rtl:mr-0 rtl:ml-2"></i> <span data-lang-en="Reset" data-lang-he="אפס"></span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Preview Section -->
        <div class="lg:col-span-3">
          <div id="invoice-preview" class="bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden p-8">
            <!-- Invoice Preview Content -->
            <div class="mb-8 flex justify-between items-start">
              <div>
                <div id="preview-company-logo" class="mb-4 h-16 flex items-center">
                  <!-- Logo will be inserted here -->
                </div>
                <h2 id="preview-company-name" class="text-2xl font-bold text-gray-900 mb-2">Your Company Name</h2>
                <div id="preview-company-details" class="text-gray-600">
                  <p id="preview-company-address">Company Address</p>
                  <p>
                    <span id="preview-company-email">company@example.com</span> | 
                    <span id="preview-company-phone">(123) 456-7890</span>
                  </p>
                </div>
              </div>
              <div class="text-right rtl:text-left">
                <h1 class="text-3xl font-bold text-blue-600 mb-2" data-lang-en="INVOICE" data-lang-he="חשבונית"></h1>
                <div class="text-gray-600">
                  <p>
                    <span class="font-medium" data-lang-en="Invoice #:" data-lang-he="מספר חשבונית:"></span> 
                    <span id="preview-invoice-number">INV-001</span>
                  </p>
                  <p>
                    <span class="font-medium" data-lang-en="Date:" data-lang-he="תאריך:"></span> 
                    <span id="preview-invoice-date">March 12, 2025</span>
                  </p>
                  <p>
                    <span class="font-medium" data-lang-en="Due Date:" data-lang-he="תאריך לתשלום:"></span> 
                    <span id="preview-invoice-due-date">April 11, 2025</span>
                  </p>
                </div>
              </div>
            </div>

            <div class="mb-8">
              <h3 class="text-lg font-bold text-gray-900 mb-2" data-lang-en="Bill To" data-lang-he="לחיוב"></h3>
              <div class="text-gray-600">
                <p id="preview-client-name" class="font-medium">Client Name</p>
                <p id="preview-client-address">Client Address</p>
                <p>
                  <span id="preview-client-email">client@example.com</span> | 
                  <span id="preview-client-phone">(123) 456-7890</span>
                </p>
              </div>
            </div>

            <div class="mb-8">
              <table class="w-full border-collapse">
                <thead>
                  <tr class="bg-gray-100 text-left rtl:text-right">
                    <th class="py-3 px-4 font-medium text-gray-700" data-lang-en="Description" data-lang-he="תיאור"></th>
                    <th class="py-3 px-4 font-medium text-gray-700 text-center" data-lang-en="Qty" data-lang-he="כמות"></th>
                    <th class="py-3 px-4 font-medium text-gray-700 text-right" data-lang-en="Price" data-lang-he="מחיר"></th>
                    <th class="py-3 px-4 font-medium text-gray-700 text-right" data-lang-en="Total" data-lang-he="סה״כ"></th>
                  </tr>
                </thead>
                <tbody id="preview-line-items">
                  <!-- Line items will be generated here -->
                  <tr class="border-b border-gray-200">
                    <td class="py-3 px-4 text-gray-700">Sample Item</td>
                    <td class="py-3 px-4 text-gray-700 text-center">1</td>
                    <td class="py-3 px-4 text-gray-700 text-right">$0.00</td>
                    <td class="py-3 px-4 text-gray-700 text-right">$0.00</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="mb-8 flex justify-end rtl:justify-start">
              <div class="w-64">
                <div class="flex justify-between py-2">
                  <span class="font-medium text-gray-700" data-lang-en="Subtotal:" data-lang-he="סכום ביניים:"></span>
                  <span id="preview-subtotal" class="text-gray-700">$0.00</span>
                </div>
                <div id="preview-discount-row" class="flex justify-between py-2 border-b border-gray-200">
                  <span class="font-medium text-gray-700" data-lang-en="Discount:" data-lang-he="הנחה:"></span>
                  <span id="preview-discount" class="text-gray-700">-$0.00</span>
                </div>
                <div id="preview-tax-row" class="flex justify-between py-2">
                  <span class="font-medium text-gray-700"><span data-lang-en="Tax" data-lang-he="מע״מ"></span> (<span id="preview-tax-rate">0</span>%):</span>
                  <span id="preview-tax-amount" class="text-gray-700">$0.00</span>
                </div>
                <div class="flex justify-between py-2 border-t border-gray-200">
                  <span class="font-bold text-gray-900" data-lang-en="Total:" data-lang-he="סה״כ לתשלום:"></span>
                  <span id="preview-total" class="font-bold text-blue-600">$0.00</span>
                </div>
              </div>
            </div>

            <div class="mb-8">
              <h3 class="text-lg font-bold text-gray-900 mb-2" data-lang-en="Payment Terms" data-lang-he="תנאי תשלום"></h3>
              <p id="preview-payment-terms" class="text-gray-600">Please pay within 30 days</p>
            </div>

            <div>
              <h3 class="text-lg font-bold text-gray-900 mb-2" data-lang-en="Notes" data-lang-he="הערות"></h3>
              <p id="preview-notes" class="text-gray-600">Thank you for your business!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Features Section -->
  <section id="features" class="py-16 bg-gray-50 no-print">
    <div class="container mx-auto px-4 md:px-6">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold tracking-tight mb-4 text-gray-900">
          <span data-lang-en="Powerful" data-lang-he="תכונות"></span> <span class="text-blue-600" data-lang-en="Features" data-lang-he="חזקות"></span>
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          <span data-lang-en="Everything you need to create professional invoices in one convenient tool." data-lang-he="כל מה שאתה צריך כדי ליצור חשבוניות מקצועיות בכלי נוח אחד."></span>
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <!-- Feature 1 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-paint-brush text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="Professional Design" data-lang-he="עיצוב מקצועי"></h3>
          <p class="text-gray-600" data-lang-en="Create clean, professional invoices that reflect your brand." data-lang-he="צור חשבוניות נקיות ומקצועיות המשקפות את המותג שלך."></p>
        </div>

        <!-- Feature 2 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-calculator text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="Automatic Calculations" data-lang-he="חישובים אוטומטיים"></h3>
          <p class="text-gray-600" data-lang-en="Never worry about math errors with automatic tax and total calculations." data-lang-he="לעולם לא תדאג לטעויות חישוב עם חישובי מס וסכומים אוטומטיים."></p>
        </div>

        <!-- Feature 3 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-download text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="PDF Export" data-lang-he="ייצוא ל-PDF"></h3>
          <p class="text-gray-600" data-lang-en="Download your invoice as a professional PDF document with one click." data-lang-he="הורד את החשבונית שלך כמסמך PDF מקצועי בלחיצה אחת."></p>
        </div>

        <!-- Feature 4 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-save text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="Save Templates" data-lang-he="שמירת תבניות"></h3>
          <p class="text-gray-600" data-lang-en="Save your invoice templates for quick access in the future." data-lang-he="שמור את תבניות החשבונית שלך לגישה מהירה בעתיד."></p>
        </div>

        <!-- Feature 5 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-lock text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="Privacy First" data-lang-he="פרטיות תחילה"></h3>
          <p class="text-gray-600" data-lang-en="Your data never leaves your browser - complete privacy for your business." data-lang-he="הנתונים שלך לעולם לא עוזבים את הדפדפן - פרטיות מלאה לעסק שלך."></p>
        </div>

        <!-- Feature 6 -->
        <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col items-center text-center">
          <div class="mb-4 p-3 rounded-full bg-blue-100 text-blue-600">
            <i class="fas fa-globe text-xl"></i>
          </div>
          <h3 class="text-xl font-bold mb-2" data-lang-en="Multilingual Support" data-lang-he="תמיכה רב-לשונית"></h3>
          <p class="text-gray-600" data-lang-en="Create invoices in English or Hebrew with full RTL support." data-lang-he="צור חשבוניות באנגלית או בעברית עם תמיכה מלאה בכתיבה מימין לשמאל."></p>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section id="how-it-works" class="py-16 bg-white no-print">
    <div class="container mx-auto px-4 md:px-6">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold tracking-tight mb-4 text-gray-900">
          <span data-lang-en="How It" data-lang-he="איך זה"></span> <span class="text-blue-600" data-lang-en="Works" data-lang-he="עובד"></span>
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          <span data-lang-en="Three simple steps to create professional invoices." data-lang-he="שלושה צעדים פשוטים ליצירת חשבוניות מקצועיות."></span>
        </p>
      </div>

      <div class="max-w-5xl mx-auto">
        <div class="flex flex-col md:flex-row items-center space-y-8 md:space-y-0 md:space-x-8 rtl:space-x-reverse">
          <!-- Step 1 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 md:w-1/3">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-lg mr-3 rtl:mr-0 rtl:ml-3">1</div>
              <h3 class="text-xl font-bold" data-lang-en="Enter Information" data-lang-he="הזן מידע"></h3>
            </div>
            <p class="text-gray-600" data-lang-en="Add your company details, client information, and invoice items." data-lang-he="הוסף את פרטי החברה שלך, מידע על הלקוח ופריטי חשבונית."></p>
          </div>

          <!-- Step 2 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 md:w-1/3">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-lg mr-3 rtl:mr-0 rtl:ml-3">2</div>
              <h3 class="text-xl font-bold" data-lang-en="Preview" data-lang-he="תצוגה מקדימה"></h3>
            </div>
            <p class="text-gray-600" data-lang-en="Review your invoice in real-time as you make changes." data-lang-he="סקור את החשבונית שלך בזמן אמת תוך כדי ביצוע שינויים."></p>
          </div>

          <!-- Step 3 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 md:w-1/3">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-lg mr-3 rtl:mr-0 rtl:ml-3">3</div>
              <h3 class="text-xl font-bold" data-lang-en="Download & Send" data-lang-he="הורד ושלח"></h3>
            </div>
            <p class="text-gray-600" data-lang-en="Generate a PDF, save your template, or print directly to share with clients." data-lang-he="צור קובץ PDF, שמור את התבנית שלך, או הדפס ישירות לשיתוף עם לקוחות."></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="py-16 bg-gray-50 no-print">
    <div class="container mx-auto px-4 md:px-6">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold tracking-tight mb-4 text-gray-900">
          <span data-lang-en="Frequently Asked" data-lang-he="שאלות"></span> <span class="text-blue-600" data-lang-en="Questions" data-lang-he="נפוצות"></span>
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          <span data-lang-en="Everything you need to know about our invoice generator." data-lang-he="כל מה שאתה צריך לדעת על מחולל החשבוניות שלנו."></span>
        </p>
      </div>

      <div class="max-w-3xl mx-auto">
        <div class="space-y-6">
          <!-- Question 1 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h3 class="text-lg font-bold mb-2" data-lang-en="Is my data secure?" data-lang-he="האם הנתונים שלי מאובטחים?"></h3>
            <p class="text-gray-600" data-lang-en="Yes, all your information stays in your browser. We don't store any of your invoice data on servers, ensuring complete privacy and security." data-lang-he="כן, כל המידע שלך נשאר בדפדפן שלך. אנחנו לא מאחסנים אף אחד מנתוני החשבונית שלך בשרתים, מה שמבטיח פרטיות ואבטחה מלאות."></p>
          </div>

          <!-- Question 2 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h3 class="text-lg font-bold mb-2" data-lang-en="Can I save my invoices?" data-lang-he="האם אני יכול לשמור את החשבוניות שלי?"></h3>
            <p class="text-gray-600" data-lang-en="Yes, you can save your invoice templates locally in your browser. You can also download your invoices as PDF files for your records." data-lang-he="כן, אתה יכול לשמור את תבניות החשבונית שלך באופן מקומי בדפדפן שלך. אתה יכול גם להוריד את החשבוניות שלך כקבצי PDF לתיעוד."></p>
          </div>

          <!-- Question 3 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h3 class="text-lg font-bold mb-2" data-lang-en="Is this free to use?" data-lang-he="האם השימוש חינם?"></h3>
            <p class="text-gray-600" data-lang-en="Yes, this invoice generator is completely free to use with no limitations or watermarks." data-lang-he="כן, מחולל החשבוניות הזה הוא לחלוטין בחינם לשימוש ללא הגבלות או סימני מים."></p>
          </div>

          <!-- Question 4 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h3 class="text-lg font-bold mb-2" data-lang-en="Can I switch between languages?" data-lang-he="האם אני יכול להחליף בין שפות?"></h3>
            <p class="text-gray-600" data-lang-en="Yes, you can easily switch between English and Hebrew at any time. The application will remember your language preference for future visits." data-lang-he="כן, אתה יכול להחליף בקלות בין אנגלית לעברית בכל עת. האפליקציה תזכור את העדפת השפה שלך לביקורים עתידיים."></p>
          </div>

          <!-- Question 5 -->
          <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
            <h3 class="text-lg font-bold mb-2" data-lang-en="What if I need help?" data-lang-he="מה אם אני צריך עזרה?"></h3>
            <p class="text-gray-600" data-lang-en="You can contact our support team at support@invoicemaster.com and we'll be happy to assist you." data-lang-he="אתה יכול ליצור קשר עם צוות התמיכה שלנו בכתובת support@invoicemaster.com ונשמח לעזור לך."></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-8 bg-white border-t border-gray-200 no-print">
    <div class="container mx-auto px-4 md:px-6 text-center">
      <p class="text-gray-600">
        © 2025 Invoice Master. <span data-lang-en="All rights reserved." data-lang-he="כל הזכויות שמורות."></span>
      </p>
      <div class="mt-2">
        <a href="#" class="text-blue-600 hover:text-blue-800 mx-2 text-sm" data-lang-en="Privacy Policy" data-lang-he="מדיניות פרטיות"></a>
        <a href="#" class="text-blue-600 hover:text-blue-800 mx-2 text-sm" data-lang-en="Terms of Service" data-lang-he="תנאי שימוש"></a>
        <a href="#" class="text-blue-600 hover:text-blue-800 mx-2 text-sm" data-lang-en="Contact" data-lang-he="צור קשר"></a>
      </div>
    </div>
  </footer>

  <!-- Load Saved Templates Modal -->
  <div id="templates-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden">
      <div class="p-6 border-b border-gray-200">
        <div class="flex justify-between items-center">
          <h3 class="text-xl font-bold text-gray-900" data-lang-en="Saved Templates" data-lang-he="תבניות שמורות"></h3>
          <button id="close-templates-modal" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="p-6 overflow-y-auto max-h-[60vh]">
        <div id="templates-list" class="space-y-4">
          <!-- Templates will be loaded here -->
          <div class="text-center text-gray-500" data-lang-en="No saved templates found." data-lang-he="לא נמצאו תבניות שמורות."></div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // DOM Elements
    const lineItemsContainer = document.getElementById('line-items-container');
    const addItemBtn = document.getElementById('add-item-btn');
    const previewBtn = document.getElementById('preview-btn');
    const downloadPdfBtn = document.getElementById('download-pdf-btn');
    const printBtn = document.getElementById('print-btn');
    const resetBtn = document.getElementById('reset-btn');
    const saveTemplateBtn = document.getElementById('save-template-btn');
    const mobileSaveTemplateBtn = document.getElementById('mobile-save-template-btn');
    const themeToggle = document.getElementById('theme-toggle');
    const mobileMenuBtn = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const templatesModal = document.getElementById('templates-modal');
    const closeTemplatesModal = document.getElementById('close-templates-modal');
    const templatesList = document.getElementById('templates-list');
    const languageSwitcher = document.getElementById('language-switcher');
    const languageDropdown = document.getElementById('language-dropdown');
    const languageOptions = document.querySelectorAll('.language-option');
    const mobileLanguageSwitcher = document.getElementById('mobile-language-switcher');

    // Language handling
    let currentLanguage = localStorage.getItem('invoiceLanguage') || 'en';
    
    // Set initial language
    setLanguage(currentLanguage);
    
    // Language switcher event listeners
    languageSwitcher.addEventListener('click', () => {
      languageDropdown.classList.toggle('hidden');
    });
    
    languageOptions.forEach(option => {
      option.addEventListener('click', () => {
        const lang = option.getAttribute('data-lang');
        setLanguage(lang);
        languageDropdown.classList.add('hidden');
      });
    });
    
    mobileLanguageSwitcher.addEventListener('change', () => {
      setLanguage(mobileLanguageSwitcher.value);
    });

    // Set language function
    function setLanguage(lang) {
      currentLanguage = lang;
      localStorage.setItem('invoiceLanguage', lang);
      
      // Update document direction
      if (lang === 'he') {
        document.documentElement.setAttribute('dir', 'rtl');
        document.body.classList.remove('lang-en');
        document.body.classList.add('lang-he');
      } else {
        document.documentElement.setAttribute('dir', 'ltr');
        document.body.classList.remove('lang-he');
        document.body.classList.add('lang-en');
      }
      
      // Update mobile language switcher
      mobileLanguageSwitcher.value = lang;
      
      // Update all text elements
      document.querySelectorAll('[data-lang-en]').forEach(el => {
        el.textContent = lang === 'en' ? el.getAttribute('data-lang-en') : el.getAttribute('data-lang-he');
      });
      
      // Update all placeholders
      document.querySelectorAll('[data-lang-placeholder-en]').forEach(el => {
        el.placeholder = lang === 'en' ? el.getAttribute('data-lang-placeholder-en') : el.getAttribute('data-lang-placeholder-he');
      });
      
      // Update preview
      updateInvoicePreview();
    }

    // Set today's date as default
    const today = new Date();
    document.getElementById('invoice-date').valueAsDate = today;
    
    // Set default due date (30 days from today)
    const dueDate = new Date();
    dueDate.setDate(today.getDate() + 30);
    document.getElementById('invoice-due-date').valueAsDate = dueDate;

    // Format currency
    function formatCurrency(amount) {
      const currencySymbol = currentLanguage === 'he' ? '₪' : '$';
      return new Intl.NumberFormat(currentLanguage === 'he' ? 'he-IL' : 'en-US', {
        style: 'currency',
        currency: currentLanguage === 'he' ? 'ILS' : 'USD',
        currencyDisplay: 'symbol'
      }).format(amount);
    }

    // Format date
    function formatDate(dateString) {
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return new Date(dateString).toLocaleDateString(currentLanguage === 'he' ? 'he-IL' : 'en-US', options);
    }

    // Calculate line item total
    function calculateLineItemTotal(lineItem) {
      const quantity = parseFloat(lineItem.querySelector('.item-quantity').value) || 0;
      const price = parseFloat(lineItem.querySelector('.item-price').value) || 0;
      const total = quantity * price;
      
      lineItem.querySelector('.item-total').value = formatCurrency(total);
      
      calculateInvoiceTotal();
    }

    // Calculate invoice total
    function calculateInvoiceTotal() {
      // Calculate subtotal
      let subtotal = 0;
      document.querySelectorAll('.line-item').forEach(item => {
        const quantity = parseFloat(item.querySelector('.item-quantity').value) || 0;
        const price = parseFloat(item.querySelector('.item-price').value) || 0;
        subtotal += quantity * price;
      });
      
      // Handle discount
      const discountValue = parseFloat(document.getElementById('discount').value) || 0;
      const discountType = document.getElementById('discount-type').value;
      let discountAmount = 0;
      
      if (discountType === 'percentage') {
        discountAmount = subtotal * (discountValue / 100);
      } else {
        discountAmount = discountValue;
      }
      
      // Handle tax
      const taxRate = parseFloat(document.getElementById('tax-rate').value) || 0;
      const taxableAmount = subtotal - discountAmount;
      const taxAmount = taxableAmount * (taxRate / 100);
      
      // Calculate total
      const total = taxableAmount + taxAmount;
      
      // Update form fields
      document.getElementById('subtotal').value = formatCurrency(subtotal);
      document.getElementById('tax-amount').value = formatCurrency(taxAmount);
      document.getElementById('total').value = formatCurrency(total);
      
      // Update preview
      document.getElementById('preview-subtotal').textContent = formatCurrency(subtotal);
      document.getElementById('preview-discount').textContent = '-' + formatCurrency(discountAmount);
      document.getElementById('preview-tax-rate').textContent = taxRate;
      document.getElementById('preview-tax-amount').textContent = formatCurrency(taxAmount);
      document.getElementById('preview-total').textContent = formatCurrency(total);
      
      // Toggle visibility of discount and tax rows based on values
      const discountRow = document.getElementById('preview-discount-row');
      discountRow.style.display = discountAmount > 0 ? 'flex' : 'none';
      
      const taxRow = document.getElementById('preview-tax-row');
      taxRow.style.display = taxRate > 0 ? 'flex' : 'none';
    }

    // Add new line item
    function addLineItem() {
      const newItem = document.createElement('div');
      newItem.className = 'line-item bg-gray-50 p-4 rounded-md border border-gray-200';
      newItem.innerHTML = `
        <div class="grid grid-cols-12 gap-3">
          <div class="col-span-12 sm:col-span-5">
            <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Description" data-lang-he="תיאור">${currentLanguage === 'en' ? 'Description' : 'תיאור'}</label>
            <input type="text" class="item-description w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="Item description" data-lang-placeholder-he="תיאור הפריט" placeholder="${currentLanguage === 'en' ? 'Item description' : 'תיאור הפריט'}">
          </div>
          <div class="col-span-4 sm:col-span-2">
            <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Quantity" data-lang-he="כמות">${currentLanguage === 'en' ? 'Quantity' : 'כמות'}</label>
            <input type="number" min="1" class="item-quantity w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="Qty" data-lang-placeholder-he="כמות" placeholder="${currentLanguage === 'en' ? 'Qty' : 'כמות'}" value="1">
          </div>
          <div class="col-span-8 sm:col-span-2">
            <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Price" data-lang-he="מחיר">${currentLanguage === 'en' ? 'Price' : 'מחיר'}</label>
            <input type="number" min="0" step="0.01" class="item-price w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-colors text-sm" data-lang-placeholder-en="0.00" data-lang-placeholder-he="0.00" placeholder="0.00">
          </div>
          <div class="col-span-11 sm:col-span-2">
            <label class="block text-xs font-medium text-gray-700 mb-1" data-lang-en="Total" data-lang-he="סה״כ">${currentLanguage === 'en' ? 'Total' : 'סה״כ'}</label>
            <input type="text" class="item-total w-full px-3 py-2 rounded-md bg-gray-100 border border-gray-300 outline-none text-sm" data-lang-placeholder-en="0.00" data-lang-placeholder-he="0.00" placeholder="0.00" readonly>
          </div>
          <div class="col-span-1 flex items-end justify-end">
            <button class="remove-item-btn text-red-500 hover:text-red-700 p-2" title="Remove Item">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
      `;
      
      lineItemsContainer.appendChild(newItem);
      
      // Add event listeners
      const quantityInput = newItem.querySelector('.item-quantity');
      const priceInput = newItem.querySelector('.item-price');
      const removeBtn = newItem.querySelector('.remove-item-btn');
      
      quantityInput.addEventListener('input', () => calculateLineItemTotal(newItem));
      priceInput.addEventListener('input', () => calculateLineItemTotal(newItem));
      removeBtn.addEventListener('click', () => {
        newItem.remove();
        calculateInvoiceTotal();
        updateInvoicePreview();
      });
    }

    // Update invoice preview
    function updateInvoicePreview() {
      // Company Information
      document.getElementById('preview-company-name').textContent = document.getElementById('company-name').value || (currentLanguage === 'en' ? 'Your Company Name' : 'שם החברה שלך');
      document.getElementById('preview-company-address').textContent = document.getElementById('company-address').value || (currentLanguage === 'en' ? 'Company Address' : 'כתובת החברה');
      document.getElementById('preview-company-email').textContent = document.getElementById('company-email').value || 'company@example.com';
      document.getElementById('preview-company-phone').textContent = document.getElementById('company-phone').value || '(123) 456-7890';
      
      // Company Logo
      const logoUrl = document.getElementById('company-logo').value;
      const logoContainer = document.getElementById('preview-company-logo');
      if (logoUrl) {
        logoContainer.innerHTML = `<img src="${logoUrl}" alt="Company Logo" class="max-h-16">`;
      } else {
        logoContainer.innerHTML = '';
      }
      
      // Client Information
      document.getElementById('preview-client-name').textContent = document.getElementById('client-name').value || (currentLanguage === 'en' ? 'Client Name' : 'שם הלקוח');
      document.getElementById('preview-client-address').textContent = document.getElementById('client-address').value || (currentLanguage === 'en' ? 'Client Address' : 'כתובת הלקוח');
      document.getElementById('preview-client-email').textContent = document.getElementById('client-email').value || 'client@example.com';
      document.getElementById('preview-client-phone').textContent = document.getElementById('client-phone').value || '(123) 456-7890';
      
      // Invoice Details
      document.getElementById('preview-invoice-number').textContent = document.getElementById('invoice-number').value || 'INV-001';
      
      const invoiceDate = document.getElementById('invoice-date').value;
      document.getElementById('preview-invoice-date').textContent = invoiceDate ? formatDate(invoiceDate) : formatDate(new Date());
      
      const invoiceDueDate = document.getElementById('invoice-due-date').value;
      document.getElementById('preview-invoice-due-date').textContent = invoiceDueDate ? formatDate(invoiceDueDate) : formatDate(dueDate);
      
      document.getElementById('preview-payment-terms').textContent = document.getElementById('payment-terms').value || (currentLanguage === 'en' ? 'Please pay within 30 days' : 'נא לשלם תוך 30 יום');
      document.getElementById('preview-notes').textContent = document.getElementById('invoice-notes').value || (currentLanguage === 'en' ? 'Thank you for your business!' : 'תודה על העסקים שלך!');
      
      // Line Items
      const lineItemsTableBody = document.getElementById('preview-line-items');
      lineItemsTableBody.innerHTML = '';
      
      document.querySelectorAll('.line-item').forEach(item => {
        const description = item.querySelector('.item-description').value || (currentLanguage === 'en' ? 'Item' : 'פריט');
        const quantity = parseFloat(item.querySelector('.item-quantity').value) || 0;
        const price = parseFloat(item.querySelector('.item-price').value) || 0;
        const total = quantity * price;
        
        const row = document.createElement('tr');
        row.className = 'border-b border-gray-200';
        row.innerHTML = `
          <td class="py-3 px-4 text-gray-700">${description}</td>
          <td class="py-3 px-4 text-gray-700 text-center">${quantity}</td>
          <td class="py-3 px-4 text-gray-700 text-right">${formatCurrency(price)}</td>
          <td class="py-3 px-4 text-gray-700 text-right">${formatCurrency(total)}</td>
        `;
        
        lineItemsTableBody.appendChild(row);
      });
      
      // If no line items, add a placeholder row
      if (lineItemsTableBody.children.length === 0) {
        const placeholderRow = document.createElement('tr');
        placeholderRow.className = 'border-b border-gray-200';
        placeholderRow.innerHTML = `
          <td class="py-3 px-4 text-gray-700">${currentLanguage === 'en' ? 'Sample Item' : 'פריט לדוגמה'}</td>
          <td class="py-3 px-4 text-gray-700 text-center">1</td>
          <td class="py-3 px-4 text-gray-700 text-right">${formatCurrency(0)}</td>
          <td class="py-3 px-4 text-gray-700 text-right">${formatCurrency(0)}</td>
        `;
        
        lineItemsTableBody.appendChild(placeholderRow);
      }
      
      // Update totals
      calculateInvoiceTotal();
    }

    // Generate PDF
    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const invoiceElement = document.getElementById('invoice-preview');
      
      window.html2canvas(invoiceElement, { scale: 2 }).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF('p', 'mm', 'a4');
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = pdf.internal.pageSize.getHeight();
        const imgWidth = canvas.width;
        const imgHeight = canvas.height;
        const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
        const imgX = (pdfWidth - imgWidth * ratio) / 2;
        const imgY = 20;
        
        pdf.addImage(imgData, 'PNG', imgX, imgY, imgWidth * ratio, imgHeight * ratio);
        
        const companyName = document.getElementById('company-name').value || (currentLanguage === 'en' ? 'Invoice' : 'חשבונית');
        const invoiceNumber = document.getElementById('invoice-number').value || 'INV-001';
        pdf.save(`${companyName}-${invoiceNumber}.pdf`);
      });
    }

    // Save template to local storage
    function saveTemplate() {
      const templateName = prompt(currentLanguage === 'en' ? 'Enter a name for this template:' : 'הזן שם לתבנית זו:');
      if (!templateName) return;
      
      const formData = {
        language: currentLanguage,
        company: {
          name: document.getElementById('company-name').value,
          email: document.getElementById('company-email').value,
          phone: document.getElementById('company-phone').value,
          address: document.getElementById('company-address').value,
          logo: document.getElementById('company-logo').value
        },
        client: {
          name: document.getElementById('client-name').value,
          email: document.getElementById('client-email').value,
          phone: document.getElementById('client-phone').value,
          address: document.getElementById('client-address').value
        },
        invoice: {
          number: document.getElementById('invoice-number').value,
          date: document.getElementById('invoice-date').value,
          dueDate: document.getElementById('invoice-due-date').value,
          paymentTerms: document.getElementById('payment-terms').value,
          notes: document.getElementById('invoice-notes').value
        },
        totals: {
          discount: document.getElementById('discount').value,
          discountType: document.getElementById('discount-type').value,
          taxRate: document.getElementById('tax-rate').value
        }
      };
      
      // Get existing templates
      let templates = JSON.parse(localStorage.getItem('invoiceTemplates')) || {};
      
      // Add the new template
      templates[templateName] = formData;
      
      // Save back to localStorage
      localStorage.setItem('invoiceTemplates', JSON.stringify(templates));
      
      alert(currentLanguage === 'en' ? `Template "${templateName}" saved successfully!` : `התבנית "${templateName}" נשמרה בהצלחה!`);
      
      // Update templates list if modal is open
      if (!templatesModal.classList.contains('hidden')) {
        loadTemplates();
      }
    }

    // Load templates from local storage
    function loadTemplates() {
      const templates = JSON.parse(localStorage.getItem('invoiceTemplates')) || {};
      const templateNames = Object.keys(templates);
      
      if (templateNames.length === 0) {
        templatesList.innerHTML = `<div class="text-center text-gray-500">${currentLanguage === 'en' ? 'No saved templates found.' : 'לא נמצאו תבניות שמורות.'}</div>`;
        return;
      }
      
      templatesList.innerHTML = '';
      
      templateNames.forEach(name => {
        const template = templates[name];
        
        const templateCard = document.createElement('div');
        templateCard.className = 'bg-gray-50 p-4 rounded-md border border-gray-200';
        templateCard.innerHTML = `
          <div class="flex justify-between items-center">
            <h4 class="font-medium text-gray-900">${name}</h4>
            <div class="flex space-x-2 rtl:space-x-reverse">
              <button class="text-blue-600 hover:text-blue-800 p-1 load-template" data-template="${name}">
                <i class="fas fa-upload"></i>
              </button>
              <button class="text-red-600 hover:text-red-800 p-1 delete-template" data-template="${name}">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
          <div class="text-sm text-gray-600 mt-1">
            ${template.company.name || (currentLanguage === 'en' ? 'Company' : 'חברה')} - ${template.invoice.date ? formatDate(template.invoice.date) : (currentLanguage === 'en' ? 'No date' : 'אין תאריך')}
          </div>
        `;
        
        templatesList.appendChild(templateCard);
        
        // Add event listeners
        const loadBtn = templateCard.querySelector('.load-template');
        const deleteBtn = templateCard.querySelector('.delete-template');
        
        loadBtn.addEventListener('click', () => {
          loadTemplate(name);
          templatesModal.classList.add('hidden');
        });
        
        deleteBtn.addEventListener('click', () => {
          if (confirm(currentLanguage === 'en' ? `Are you sure you want to delete the template "${name}"?` : `האם אתה בטוח שברצונך למחוק את התבנית "${name}"?`)) {
            deleteTemplate(name);
            templateCard.remove();
            
            if (templatesList.children.length === 0) {
              templatesList.innerHTML = `<div class="text-center text-gray-500">${currentLanguage === 'en' ? 'No saved templates found.' : 'לא נמצאו תבניות שמורות.'}</div>`;
            }
          }
        });
      });
    }

    // Load a specific template
    function loadTemplate(templateName) {
      const templates = JSON.parse(localStorage.getItem('invoiceTemplates')) || {};
      const template = templates[templateName];
      
      if (!template) return;
      
      // Set language if different
      if (template.language && template.language !== currentLanguage) {
        setLanguage(template.language);
      }
      
      // Fill in form fields
      document.getElementById('company-name').value = template.company.name || '';
      document.getElementById('company-email').value = template.company.email || '';
      document.getElementById('company-phone').value = template.company.phone || '';
      document.getElementById('company-address').value = template.company.address || '';
      document.getElementById('company-logo').value = template.company.logo || '';
      
      document.getElementById('client-name').value = template.client.name || '';
      document.getElementById('client-email').value = template.client.email || '';
      document.getElementById('client-phone').value = template.client.phone || '';
      document.getElementById('client-address').value = template.client.address || '';
      
      document.getElementById('invoice-number').value = template.invoice.number || '';
      document.getElementById('invoice-date').value = template.invoice.date || '';
      document.getElementById('invoice-due-date').value = template.invoice.dueDate || '';
      document.getElementById('payment-terms').value = template.invoice.paymentTerms || '';
      document.getElementById('invoice-notes').value = template.invoice.notes || '';
      
      document.getElementById('discount').value = template.totals.discount || '';
      document.getElementById('discount-type').value = template.totals.discountType || 'percentage';
      document.getElementById('tax-rate').value = template.totals.taxRate || '';
      
      // Update preview
      updateInvoicePreview();
    }

    // Delete a template
    function deleteTemplate(templateName) {
      const templates = JSON.parse(localStorage.getItem('invoiceTemplates')) || {};
      
      if (!templates[templateName]) return;
      
      delete templates[templateName];
      localStorage.setItem('invoiceTemplates', JSON.stringify(templates));
      
      alert(currentLanguage === 'en' ? `Template "${templateName}" deleted successfully!` : `התבנית "${templateName}" נמחקה בהצלחה!`);
    }

    // Reset the form
    function resetForm() {
      if (!confirm(currentLanguage === 'en' ? 'Are you sure you want to reset all fields? This cannot be undone.' : 'האם אתה בטוח שברצונך לאפס את כל השדות? פעולה זו אינה ניתנת לביטול.')) return;
      
      // Reset all form fields
      document.querySelectorAll('input, textarea, select').forEach(field => {
        if (field.type === 'date') {
          if (field.id === 'invoice-date') {
            field.valueAsDate = new Date();
          } else if (field.id === 'invoice-due-date') {
            const dueDate = new Date();
            dueDate.setDate(dueDate.getDate() + 30);
            field.valueAsDate = dueDate;
          }
        } else if (field.id !== 'mobile-language-switcher' && field.id !== 'discount-type') {
          field.value = '';
        }
      });
      
      // Reset line items (keep one empty line item)
      lineItemsContainer.innerHTML = '';
      addLineItem();
      
      // Update preview
      updateInvoicePreview();
    }

    // Click outside to close dropdowns
    document.addEventListener('click', function(event) {
      if (!languageSwitcher.contains(event.target) && !languageDropdown.contains(event.target)) {
        languageDropdown.classList.add('hidden');
      }
    });

    // Event Listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Line item change events
      document.querySelectorAll('.item-quantity, .item-price').forEach(input => {
        input.addEventListener('input', function() {
          calculateLineItemTotal(this.closest('.line-item'));
        });
      });
      
      // Remove line item
      document.querySelectorAll('.remove-item-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          if (document.querySelectorAll('.line-item').length > 1) {
            this.closest('.line-item').remove();
            calculateInvoiceTotal();
            updateInvoicePreview();
          } else {
            alert(currentLanguage === 'en' ? 'You must have at least one line item.' : 'חייב להיות לפחות פריט אחד.');
          }
        });
      });
      
      // Add line item
      addItemBtn.addEventListener('click', addLineItem);
      
      // Preview button
      previewBtn.addEventListener('click', updateInvoicePreview);
      
      // Download PDF
      downloadPdfBtn.addEventListener('click', generatePDF);
      
      // Print
      printBtn.addEventListener('click', function() {
        window.print();
      });
      
      // Reset form
      resetBtn.addEventListener('click', resetForm);
      
      // Save template
      saveTemplateBtn.addEventListener('click', function() {
        saveTemplate();
      });
      
      mobileSaveTemplateBtn.addEventListener('click', function() {
        saveTemplate();
      });
      
      // Load saved templates
      saveTemplateBtn.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        templatesModal.classList.remove('hidden');
        loadTemplates();
      });
      
      mobileSaveTemplateBtn.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        templatesModal.classList.remove('hidden');
        loadTemplates();
      });
      
      // Show template selection modal on long press
      let pressTimer;
      saveTemplateBtn.addEventListener('mousedown', function() {
        pressTimer = window.setTimeout(function() {
          templatesModal.classList.remove('hidden');
          loadTemplates();
        }, 1000);
      });
      
      saveTemplateBtn.addEventListener('mouseup', function() {
        clearTimeout(pressTimer);
      });
      
      saveTemplateBtn.addEventListener('mouseleave', function() {
        clearTimeout(pressTimer);
      });
      
      // Close templates modal
      closeTemplatesModal.addEventListener('click', function() {
        templatesModal.classList.add('hidden');
      });
      
      // Toggle theme
      themeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
        themeToggle.querySelector('.fa-moon').classList.toggle('hidden');
        themeToggle.querySelector('.fa-sun').classList.toggle('hidden');
        
        // Save theme preference
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem('invoiceTheme', isDark ? 'dark' : 'light');
      });
      
      // Load saved theme
      const savedTheme = localStorage.getItem('invoiceTheme');
      if (savedTheme === 'dark') {
        document.documentElement.classList.add('dark');
        themeToggle.querySelector('.fa-moon').classList.add('hidden');
        themeToggle.querySelector('.fa-sun').classList.remove('hidden');
      }
      
      // Mobile menu toggle
      mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
      
      // Discount and tax change events
      document.getElementById('discount').addEventListener('input', calculateInvoiceTotal);
      document.getElementById('discount-type').addEventListener('change', calculateInvoiceTotal);
      document.getElementById('tax-rate').addEventListener('input', calculateInvoiceTotal);
      
      // Form field change events
      document.querySelectorAll('input, textarea').forEach(field => {
        field.addEventListener('input', updateInvoicePreview);
      });
      
      // Initialize
      updateInvoicePreview();
    });
  </script>
</body>
</html>
